System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui","jimu-ui/advanced/resource-selector","jimu-ui/advanced/data-source-selector","jimu-ui/advanced/expression-builder"],(function(e,t){var i={},s={},o={},n={},a={},p={};return{setters:[function(e){i.CONSTANTS=e.CONSTANTS,i.DataSourceComponent=e.DataSourceComponent,i.DataSourceManager=e.DataSourceManager,i.Immutable=e.Immutable,i.React=e.React,i.classNames=e.classNames,i.css=e.css,i.expressionUtils=e.expressionUtils,i.jsx=e.jsx,i.urlUtils=e.urlUtils},function(e){s.LinkSettingPopup=e.LinkSettingPopup,s.SettingRow=e.SettingRow,s.SettingSection=e.SettingSection},function(e){o.Button=e.Button,o.Icon=e.Icon,o.ImageFillMode=e.ImageFillMode,o.NumericInput=e.NumericInput,o.Radio=e.Radio,o.Select=e.Select,o.Slider=e.Slider,o.Tab=e.Tab,o.Tabs=e.Tabs,o.TextInput=e.TextInput},function(e){n.ImageSelector=e.ImageSelector},function(e){a.AllDataSourceTypes=e.AllDataSourceTypes,a.DataSourceSelector=e.DataSourceSelector,a.DataViewPriority=e.DataViewPriority,a.MainDataAndViewSelector=e.MainDataAndViewSelector},function(e){p.ExpressionInput=e.ExpressionInput,p.ExpressionInputType=e.ExpressionInputType}],execute:function(){e((()=>{var e={98709:(e,t,i)=>{var s={"./circle.svg":70767,"./hexagon.svg":87976,"./oval.svg":84937,"./pentagon.svg":81978,"./rectangle.svg":60152,"./rhombus.svg":19084,"./triangle.svg":76444};function o(e){var t=n(e);return i(t)}function n(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=n,e.exports=o,o.id=98709},24786:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.343 8l1.768-1.768.707.707L3.05 8.707a3 3 0 004.243 4.243l1.767-1.768.708.707L8 13.657A4 4 0 112.343 8zM12.95 7.293l-1.768 1.768.707.707L13.657 8A4 4 0 108 2.343L6.232 4.111l.707.707L8.707 3.05a3 3 0 014.243 4.243z" fill="#000"></path><path d="M5.879 9.414a.5.5 0 00.707.707l3.535-3.535a.5.5 0 00-.707-.707L5.879 9.414z" fill="#000"></path></svg>'},70767:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M28 14c0 7.732-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0s14 6.268 14 14z"></path></svg>'},87976:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14.124 0l12.124 7v14l-12.124 7L2 21V7z"></path></svg>'},84937:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M28 14c0 5.523-6.268 10-14 10S0 19.523 0 14 6.268 4 14 4s14 4.477 14 10z"></path></svg>'},81978:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14 1l14 10.172-5.348 16.458H5.347L-.001 11.172z"></path></svg>'},60152:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M0 0v28h28V0H0z"></path></svg>'},19084:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14 0l14 14-14 14L0 14z"></path></svg>'},76444:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path d="M14 0l14 28H0z"></path></svg>'},84762:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNCAoNjczNzgpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5SZWN0YW5nbGU8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSJTeW1ib2xzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNvbmZpZ3VyZS1MaW5rIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjUuMDAwMDAwLCAtNjQ1LjAwMDAwMCkiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSIjRTZFQkYwIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAuMDAwMDAwLCA2MTEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDI5LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iNDUuNSIgeT0iNS41IiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHJ4PSI2Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},20988:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjIycHgiIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDIyIDE4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNCAoNjczNzgpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5PdmFsPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZyBpZD0iU3ltYm9scyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJDb25maWd1cmUtTGluayIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwNC4wMDAwMDAsIC02NDYuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9IiNFNkVCRjAiPg0KICAgICAgICAgICAgPGcgaWQ9IlNldHRpbmdQYW5lbCI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMC4wMDAwMDAsIDYxMS4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgMjkuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZWxsaXBzZSBpZD0iT3ZhbCIgY3g9Ijk1IiBjeT0iMTUiIHJ4PSIxMCIgcnk9IjgiPjwvZWxsaXBzZT4NCiAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},42032:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMTRweCIgdmlld0JveD0iMCAwIDIwIDE0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTIuNCAoNjczNzgpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5SZWN0YW5nbGU8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSJTeW1ib2xzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNvbmZpZ3VyZS1MaW5rIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjUuMDAwMDAwLCAtNjQ4LjAwMDAwMCkiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSIjRTZFQkYwIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAuMDAwMDAwLCA2MTEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDI5LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgeD0iNS41IiB5PSI4LjUiIHdpZHRoPSIxOSIgaGVpZ2h0PSIxMyI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},1810:e=>{"use strict";e.exports=i},21835:e=>{"use strict";e.exports=o},33037:e=>{"use strict";e.exports=a},47460:e=>{"use strict";e.exports=p},50831:e=>{"use strict";e.exports=n},23080:e=>{"use strict";e.exports=s}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var c={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(c),r.d(c,{default:()=>y});var e,t,i=r(1810),s=r(23080),o=r(21835),n=r(50831),a=r(33037);!function(e){e.ByUpload="BYUPLOAD",e.ByStaticUrl="BYSTATICURL",e.ByDynamicUrl="BYDYNAMICURL"}(e||(e={})),function(e){e.Expression="EXPRESSION",e.Attachment="ATTACHMENT",e.Symbol="SYMBOL"}(t||(t={}));const p={shapes:{square:{borderRadius:{number:[0],unit:"px"},thumbUrl:r(42032)},capsule:{borderRadius:{number:[10,10,10,10],unit:"%"},thumbUrl:r(84762)},round:{borderRadius:{number:[50,50,50,50],unit:"%"},thumbUrl:r(20988)}}},l={imageSource:"Image source",imageNoneSource:"None",staticSource:"Static",dynamicSource:"Dynamic",imageSet:"Select an image",toolTip:"Tooltip",altText:"Alt text",imageSetLink:"Set link",imageShape:"Shape",setLinkForImage:"Set link",imagePosition:"Position",imageFit:"Fit",imageFill:"Fill",imageAttachment:"Attachment",imageCustom:"Custom",imageAttachmentName:"Attachment name",imageSymbol:"Symbol",imageSymbolScale:"Symbol scale",imagerectangle:"Rectangle/Square",imagecircle:"Oval/Circle",imagehexagon:"Hexagon",imagepentagon:"Pentagon",imagerhombus:"Rhombus",imagetriangle:"Triangle",imageShapeSettings:"Shape settings",imageUploadBlankStatus:'Click the "{ButtonString}" button to select an image from your device.'};class g extends i.React.PureComponent{constructor(){super(...arguments),this.cropShapeList=["rectangle","circle","hexagon","pentagon","rhombus","triangle"],this.shapeClick=(e,t)=>{if(this.props.cropParam&&this.props.cropParam.cropShape===this.cropShapeList[t])return;const s=e.currentTarget.getElementsByTagName("svg")&&e.currentTarget.getElementsByTagName("svg")[0];if(s){let e=this.props.cropParam;e||(e=(0,i.Immutable)({})),e=e.set("svgViewBox",s.getAttribute("viewBox")),e=e.set("svgPath",s.getElementsByTagName("path")[0].getAttribute("d")),e=e.set("cropShape",this.cropShapeList[t]),this.props.onShapeChoosed&&this.props.onShapeChoosed(e)}}}getStyle(){const e=this.props.theme;return i.css`
      .widget-image-chooseshape-item {
        cursor: pointer;
        height: 30px;
        width: 35px;
        background-color: ${e.colors.palette.secondary[200]};

        svg {
          fill: ${e.colors.black};
        }
      }
      `}render(){return(0,i.jsx)("div",{className:"w-100 d-flex justify-content-between",css:this.getStyle()},this.cropShapeList.map(((e,t)=>{var s,n;const a=r(98709)(`./${e}.svg`);return"rectangle"!==e||this.props.cropParam?(0,i.jsx)(o.Button,{key:t,className:(0,i.classNames)("widget-image-chooseshape-item p-0",{"border-selected":(null===(n=null===(s=this.props)||void 0===s?void 0:s.cropParam)||void 0===n?void 0:n.cropShape)===e}),onClick:e=>this.shapeClick(e,t),icon:!0,title:this.props.intl.formatMessage({id:`image${e}`,defaultMessage:l[`image${e}`]})},(0,i.jsx)(o.Icon,{width:12,height:12,icon:a})):(0,i.jsx)(o.Button,{key:t,className:(0,i.classNames)("widget-image-chooseshape-item border-selected p-0"),onClick:e=>this.shapeClick(e,t),icon:!0,title:this.props.intl.formatMessage({id:"imagerectangle",defaultMessage:l.imagerectangle})},(0,i.jsx)(o.Icon,{width:12,height:12,icon:a}))})))}}var h=r(47460);const u=(0,i.Immutable)([h.ExpressionInputType.Static,h.ExpressionInputType.Attribute,h.ExpressionInputType.Statistics,h.ExpressionInputType.Expression]);class m extends i.React.PureComponent{constructor(){super(...arguments),this.getRenderContent=()=>this.props.useDataSourcesEnabled?this.props.imgSourceType!==e.ByDynamicUrl||this.props.dynamicUrlType!==t.Attachment&&this.props.dynamicUrlType!==t.Symbol?i.React.createElement("div",{style:{width:"100%",position:"relative"}},i.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onToolTipExpChange,openExpPopup:this.props.openToolTipPopup,expression:this.props.toolTipExpression,isExpPopupOpen:this.props.isToolTipPopupOpen,closeExpPopup:this.props.closeToolTipPopup,types:u,widgetId:this.props.widgetId})):this.props.dynamicUrlType===t.Attachment?i.React.createElement("div",{className:"w-100"},i.React.createElement(s.SettingRow,{flow:"wrap"},i.React.createElement("div",{className:"align-items-center d-flex"},i.React.createElement(o.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onToolTipWithAttachmentNameChange(!1),checked:!this.props.toolTipWithAttachmentName}),i.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onToolTipWithAttachmentNameChange(!1)},this.props.intl.formatMessage({id:"imageCustom",defaultMessage:l.imageCustom})))),!this.props.toolTipWithAttachmentName&&i.React.createElement(s.SettingRow,null,i.React.createElement("div",{className:"w-100 d-flex justify-content-end"},i.React.createElement("div",{style:{width:"90%",position:"relative"}},i.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onToolTipExpChange,openExpPopup:this.props.openToolTipPopup,expression:this.props.toolTipExpression,isExpPopupOpen:this.props.isToolTipPopupOpen,closeExpPopup:this.props.closeToolTipPopup,types:u,widgetId:this.props.widgetId})))),i.React.createElement(s.SettingRow,null,i.React.createElement("div",{className:"align-items-center d-flex"},i.React.createElement(o.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onToolTipWithAttachmentNameChange(!0),checked:this.props.toolTipWithAttachmentName}),i.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onToolTipWithAttachmentNameChange(!0)},this.props.intl.formatMessage({id:"imageAttachmentName",defaultMessage:l.imageAttachmentName}))))):this.props.dynamicUrlType===t.Symbol?i.React.createElement("div",{style:{width:"100%",position:"relative"}},i.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onToolTipExpChange,openExpPopup:this.props.openToolTipPopup,expression:this.props.toolTipExpression,isExpPopupOpen:this.props.isToolTipPopupOpen,closeExpPopup:this.props.closeToolTipPopup,types:u,widgetId:this.props.widgetId})):void 0:i.React.createElement("div",{style:{width:"100%",position:"relative"}},i.React.createElement(o.TextInput,{size:"sm",style:{width:"100%"},className:"float-right",value:this.props.toolTipText,onChange:e=>{this.props.onToolTipTextInputChange(e.target.value)},onBlur:()=>{this.props.toolTipConfigChange()},onKeyUp:()=>{this.props.toolTipConfigChange()}}))}render(){return i.React.createElement(s.SettingRow,{flow:"wrap",label:this.props.intl.formatMessage({id:"toolTip",defaultMessage:l.toolTip})},this.getRenderContent())}}const d=(0,i.Immutable)([h.ExpressionInputType.Static,h.ExpressionInputType.Attribute,h.ExpressionInputType.Statistics,h.ExpressionInputType.Expression]);class S extends i.React.PureComponent{constructor(){super(...arguments),this.getRenderContent=()=>this.props.useDataSourcesEnabled?this.props.imgSourceType!==e.ByDynamicUrl||this.props.dynamicUrlType!==t.Attachment&&this.props.dynamicUrlType!==t.Symbol?i.React.createElement("div",{style:{width:"100%",position:"relative"}},i.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onAltTextExpChange,openExpPopup:this.props.openAltTextPopup,expression:this.props.altTextExpression,isExpPopupOpen:this.props.isAltTextPopupOpen,closeExpPopup:this.props.closeAltTextPopup,types:d,widgetId:this.props.widgetId})):this.props.dynamicUrlType===t.Attachment?i.React.createElement("div",{className:"w-100"},i.React.createElement(s.SettingRow,{flow:"wrap"},i.React.createElement("div",{className:"align-items-center d-flex"},i.React.createElement(o.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onAltTextWithAttachmentNameChange(!1),checked:!this.props.altTextWithAttachmentName}),i.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onAltTextWithAttachmentNameChange(!1)},this.props.intl.formatMessage({id:"imageCustom",defaultMessage:l.imageCustom})))),!this.props.altTextWithAttachmentName&&i.React.createElement(s.SettingRow,null,i.React.createElement("div",{className:"w-100 d-flex justify-content-end"},i.React.createElement("div",{style:{width:"90%",position:"relative"}},i.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onAltTextExpChange,openExpPopup:this.props.openAltTextPopup,expression:this.props.altTextExpression,isExpPopupOpen:this.props.isAltTextPopupOpen,closeExpPopup:this.props.closeAltTextPopup,types:d,widgetId:this.props.widgetId})))),i.React.createElement(s.SettingRow,null,i.React.createElement("div",{className:"align-items-center d-flex"},i.React.createElement(o.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onAltTextWithAttachmentNameChange(!0),checked:this.props.altTextWithAttachmentName}),i.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onAltTextWithAttachmentNameChange(!0)},this.props.intl.formatMessage({id:"imageAttachmentName",defaultMessage:l.imageAttachmentName}))))):this.props.dynamicUrlType===t.Symbol?i.React.createElement("div",{style:{width:"100%",position:"relative"}},i.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onAltTextExpChange,openExpPopup:this.props.openAltTextPopup,expression:this.props.altTextExpression,isExpPopupOpen:this.props.isAltTextPopupOpen,closeExpPopup:this.props.closeAltTextPopup,types:d,widgetId:this.props.widgetId})):void 0:i.React.createElement("div",{style:{width:"100%",position:"relative"}},i.React.createElement(o.TextInput,{size:"sm",style:{width:"100%"},className:"float-right",value:this.props.altTextText,onChange:e=>{this.props.onAltTextTextInputChange(e.target.value)},onBlur:()=>{this.props.altTextConfigChange()},onKeyUp:()=>{this.props.altTextConfigChange()}}))}render(){return i.React.createElement(s.SettingRow,{flow:"wrap",label:this.props.intl.formatMessage({id:"altText",defaultMessage:l.altText})},this.getRenderContent())}}const C=(0,i.Immutable)([h.ExpressionInputType.Attribute,h.ExpressionInputType.Expression]);class f extends i.React.PureComponent{constructor(){super(...arguments),this.getRenderContent=e=>{const n=e&&e.supportAttachment(),p=e&&e.supportSymbol();return e?((!n&&this.props.dynamicUrlType===t.Attachment||!p&&this.props.dynamicUrlType===t.Symbol)&&this.props.onTypeNoSupportChange&&this.props.onTypeNoSupportChange(),p||n?i.React.createElement("div",{className:"w-100"},this.getExpressionSettingWithRadio(),n&&i.React.createElement("div",{className:"w-100 d-flex justify-content-end mt-3","data-testid":"dynamicurl-attachment"},i.React.createElement("div",{className:"w-100"},i.React.createElement(s.SettingRow,{flow:"wrap"},i.React.createElement("div",{className:"d-flex justify-content-between w-100"},i.React.createElement("div",{className:"align-items-center d-flex"},i.React.createElement(o.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onDynamicUrlTypeChanged(t.Attachment),checked:this.props.dynamicUrlType===t.Attachment}),i.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onDynamicUrlTypeChanged(t.Attachment)},this.props.intl.formatMessage({id:"imageAttachment",defaultMessage:l.imageAttachment})))),this.props.dynamicUrlType===t.Attachment&&i.React.createElement("div",{className:"d-flex w-100 justify-content-end mt-3"},i.React.createElement("div",{style:{width:"90%",position:"relative"}},i.React.createElement(a.MainDataAndViewSelector,{hideMainDataSourceSelect:!0,widgetId:this.props.widgetId,useDataSources:this.props.useDataSources,selectedUseDataSource:this.props.useDataSourceForMainDataAndViewSelector,onChange:this.props.onSelectedUseDsChangeForAttachment,isSelectedFromRepeatedDataSourceContext:this.props.isSelectedFromRepeatedDataSourceContext,usePopulatedDataView:!0,useSelectionDataView:!0,defaultDataViewPriority:a.DataViewPriority.First})))))),p&&i.React.createElement("div",{className:"w-100 d-flex justify-content-end mt-3"},i.React.createElement("div",{className:"w-100"},i.React.createElement(s.SettingRow,{flow:"wrap"},i.React.createElement("div",{className:"d-flex justify-content-between w-100"},i.React.createElement("div",{className:"align-items-center d-flex"},i.React.createElement(o.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onDynamicUrlTypeChanged(t.Symbol),checked:this.props.dynamicUrlType===t.Symbol}),i.React.createElement("label",{className:"m-0 ml-2",style:{cursor:"pointer"},onClick:()=>this.props.onDynamicUrlTypeChanged(t.Symbol)},this.props.intl.formatMessage({id:"imageSymbol",defaultMessage:l.imageSymbol})))),this.props.dynamicUrlType===t.Symbol&&i.React.createElement("div",{className:"d-flex w-100 justify-content-end mt-3"},i.React.createElement("div",{style:{width:"90%",position:"relative"}},i.React.createElement(a.MainDataAndViewSelector,{hideMainDataSourceSelect:!0,widgetId:this.props.widgetId,useDataSources:this.props.useDataSources,selectedUseDataSource:this.props.useDataSourceForMainDataAndViewSelector,isSelectedFromRepeatedDataSourceContext:this.props.isSelectedFromRepeatedDataSourceContext,onChange:this.props.onSelectedUseDsChangeForSymbol,usePopulatedDataView:!0,useSelectionDataView:!0,defaultDataViewPriority:a.DataViewPriority.First}))))))):this.getExpressionSettingWithoutRadio()):this.getExpressionSettingWithoutRadio()},this.getExpressionSettingWithRadio=()=>i.React.createElement("div",{className:"w-100 d-flex justify-content-end"},i.React.createElement("div",{className:"w-100"},i.React.createElement("div",{className:"d-flex w-100 align-items-center"},i.React.createElement(o.Radio,{style:{cursor:"pointer"},onChange:()=>this.props.onDynamicUrlTypeChanged(t.Expression),checked:this.props.dynamicUrlType===t.Expression||!this.props.dynamicUrlType,"data-testid":"dynamicurl-expression"}),i.React.createElement("label",{className:"m-0 ml-2",onClick:()=>this.props.onDynamicUrlTypeChanged(t.Expression)},"URL")),(this.props.srcExpression||this.props.dynamicUrlType===t.Expression||!this.props.dynamicUrlType)&&i.React.createElement("div",{className:"d-flex w-100 justify-content-end mt-3"},i.React.createElement("div",{style:{width:"90%",position:"relative"}},i.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onSrcExpChange,openExpPopup:this.props.openSrcPopup,expression:this.props.srcExpression,isExpPopupOpen:this.props.isSrcPopupOpen,closeExpPopup:this.props.closeSrcPopup,types:C,widgetId:this.props.widgetId}))))),this.getExpressionSettingWithoutRadio=()=>i.React.createElement("div",{className:"w-100 d-flex justify-content-end"},i.React.createElement("div",{className:"w-100"},i.React.createElement("div",{className:"d-flex justify-content-between w-100 align-items-center"},i.React.createElement("label",{className:"m-0"},"URL")),this.props.srcExpression||this.props.dynamicUrlType===t.Expression||!this.props.dynamicUrlType?i.React.createElement("div",{className:"mt-2",style:{width:"100%",position:"relative"}},i.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onSrcExpChange,openExpPopup:this.props.openSrcPopup,expression:this.props.srcExpression,isExpPopupOpen:this.props.isSrcPopupOpen,closeExpPopup:this.props.closeSrcPopup,types:C,widgetId:this.props.widgetId})):i.React.createElement("div",{className:"mt-2",style:{width:"100%",position:"relative"}},i.React.createElement("div",{className:"w-100 h-100",style:{position:"absolute",opacity:.5,backgroundColor:"gray",zIndex:100}}),i.React.createElement(h.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.props.onSrcExpChange,openExpPopup:this.props.openSrcPopup,expression:this.props.srcExpression,isExpPopupOpen:this.props.isSrcPopupOpen,closeExpPopup:this.props.closeSrcPopup,types:C,widgetId:this.props.widgetId}))))}render(){let e=null;if(this.props.useDataSources)for(let t=0;t<this.props.useDataSources.length;t++)e=this.props.useDataSources[0];return i.React.createElement(s.SettingRow,{flow:"wrap"},e&&i.React.createElement(i.DataSourceComponent,{useDataSource:e},(e=>this.getRenderContent(e))),!e&&this.getExpressionSettingWithoutRadio())}}var I=r(24786),x=r.n(I);const T=e=>{const{className:t}=e,s=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(e,["className"]),n=(0,i.classNames)("jimu-icon-component",t);return i.React.createElement(o.Icon,Object.assign({className:n,icon:x()},s))};class y extends i.React.PureComponent{constructor(t){super(t),this.supportedTypes=(0,i.Immutable)([a.AllDataSourceTypes.FeatureLayer,a.AllDataSourceTypes.SceneLayer]),this.onSymbolScaleChanged=null,this.minSymbolScale=.5,this.maxSymbolScale=5,this.SymbolScaleStep=.1,this.linkSettingTrigger=i.React.createRef(),this.settingLinkConfirm=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","linkParam"],e)}),this.setState({isShowLinkSetting:!1})},this.updateStyle=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["styleConfig",e],t)})},this.shapeChange=e=>{let t=(0,i.Immutable)(this.props.config.styleConfig);t=t.set("shape",e),t=t.set("borderRadius",this.props.preDefinedConfigs.shapes[e].borderRadius),this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["styleConfig"],t)})},this.altTextConfigChange=()=>{const e={id:this.props.id,config:this.props.config.setIn(["functionConfig","altText"],this.state.currentAltTextInput).setIn(["functionConfig","altTextExpression"],null),useDataSources:this.getUseDataSourcesWithoutFields()};this.props.onSettingChange(e)},this.toolTipConfigChange=()=>{const e={id:this.props.id,config:this.props.config.setIn(["functionConfig","toolTip"],this.state.currentTipInput).setIn(["functionConfig","toolTipExpression"],null),useDataSources:this.getUseDataSourcesWithoutFields()};this.props.onSettingChange(e)},this.imgSourceTypeChanged=e=>{let t=(0,i.Immutable)(this.props.config.functionConfig);t=t.set("dynamicUrlType",null),t=t.set("imgSourceType",e),t=t.set("srcExpression",null),t=t.set("imageParam",this.resetImageParam(this.props.config.functionConfig.imageParam)),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("functionConfig",t)})},this.dynamicUrlTypeChanged=t=>{let s=(0,i.Immutable)(this.props.config.functionConfig);s=s.set("dynamicUrlType",t),s=s.set("imgSourceType",e.ByDynamicUrl),s=s.set("srcExpression",null),s=s.set("imageParam",this.resetImageParam(this.props.config.functionConfig.imageParam)),s=s.set("altTextWithAttachmentName",null),s=s.set("toolTipWithAttachmentName",null),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("functionConfig",s)})},this.openSrcPopup=()=>{this.setState({isSrcPopupOpen:!0,isAltTextPopupOpen:!1,isToolTipPopupOpen:!1})},this.closeSrcPopup=()=>{this.setState({isSrcPopupOpen:!1})},this.openToolTipPopup=()=>{this.setState({isSrcPopupOpen:!1,isAltTextPopupOpen:!1,isToolTipPopupOpen:!0})},this.closeToolTipPopup=()=>{this.setState({isToolTipPopupOpen:!1})},this.openAltTextPopup=()=>{this.setState({isSrcPopupOpen:!1,isAltTextPopupOpen:!0,isToolTipPopupOpen:!1})},this.closeAltTextPopup=()=>{this.setState({isAltTextPopupOpen:!1})},this.getUseDataSourcesWithoutFields=()=>this.props.useDataSources&&this.props.useDataSources[0]&&this.props.useDataSources[0].dataSourceId?[this.props.useDataSources[0].without("fields")]:[],this.getSrcExpression=()=>{const e=this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.srcExpression&&this.props.config.functionConfig.srcExpression;return e&&e.asMutable({deep:!0})||null},this.getToolTipExpression=()=>{const e=this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.toolTipExpression&&this.props.config.functionConfig.toolTipExpression;return e&&e.asMutable({deep:!0})||null},this.getAltTextExpression=()=>{const e=this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.altTextExpression&&this.props.config.functionConfig.altTextExpression;return e&&e.asMutable({deep:!0})||null},this.onToolTipExpChange=e=>{if(!e)return;const t=this.getSrcExpression(),i=this.getAltTextExpression(),s=this.mergeUseDataSources(t,e,i);this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","toolTipExpression"],e).setIn(["functionConfig","toolTip"],""),useDataSources:s}),this.setState({isToolTipPopupOpen:!1})},this.onAltTextExpChange=e=>{if(!e)return;const t=this.getSrcExpression(),i=this.getToolTipExpression(),s=this.mergeUseDataSources(t,i,e);this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","altTextExpression"],e).setIn(["functionConfig","altText"],""),useDataSources:s}),this.setState({isAltTextPopupOpen:!1})},this.onSrcExpChange=e=>{if(!e)return;const t=this.getToolTipExpression(),i=this.getAltTextExpression(),s=this.mergeUseDataSources(e,t,i);this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","srcExpression"],e).setIn(["functionConfig","imageParam"],this.resetImageParam(this.props.config.functionConfig.imageParam)),useDataSources:s}),this.setState({isSrcPopupOpen:!1})},this.mergeUseDataSources=(e,t,s)=>{const o=i.expressionUtils.getUseDataSourceFromExpParts(e&&e.parts,this.props.useDataSources),n=i.expressionUtils.getUseDataSourceFromExpParts(t&&t.parts,this.props.useDataSources),a=i.expressionUtils.getUseDataSourceFromExpParts(s&&s.parts,this.props.useDataSources);return this.mergeUseDataSourcesByDss(o,n,a)},this.mergeUseDataSourcesByDss=(e,t,s)=>{const o=this.getUseDataSourcesWithoutFields();let n=i.expressionUtils.mergeUseDataSources(o,t);return n=i.expressionUtils.mergeUseDataSources(n,s),n=i.expressionUtils.mergeUseDataSources(n,e),n},this.onResourceChange=e=>{let t=e;t||(t={});let s=(0,i.Immutable)(this.props.config.functionConfig);s.imageParam&&s.imageParam.cropParam&&(t.cropParam={svgViewBox:s.imageParam.cropParam.svgViewBox,svgPath:s.imageParam.cropParam.svgPath,cropShape:s.imageParam.cropParam.cropShape}),s=s.set("imageParam",t),s=s.set("imgSourceType",""),s=s.set("srcExpression",null),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("functionConfig",s)})},this.resetImageParam=e=>e&&e.cropParam?{cropParam:e.cropParam}:null,this.onToggleUseDataEnabled=e=>{this.props.onSettingChange({id:this.props.id,useDataSourcesEnabled:e})},this.onDataSourceChange=e=>{e&&this.props.onSettingChange({id:this.props.id,useDataSources:e,config:this.props.config.setIn(["functionConfig","dynamicUrlType"],null).setIn(["functionConfig","altTextWithAttachmentName"],null).setIn(["functionConfig","toolTipWithAttachmentName"],null).setIn(["functionConfig","isSelectedFromRepeatedDataSourceContext"],null).setIn(["functionConfig","useDataSourceForMainDataAndViewSelector"],null)})},this.onTypeNoSupportChange=()=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","dynamicUrlType"],null).setIn(["functionConfig","altTextWithAttachmentName"],null).setIn(["functionConfig","toolTipWithAttachmentName"],null).setIn(["functionConfig","isSelectedFromRepeatedDataSourceContext"],null).setIn(["functionConfig","useDataSourceForMainDataAndViewSelector"],null)})},this.onDataSourceRemoved=()=>{this.props.onSettingChange({id:this.props.id,useDataSources:[],config:this.props.config.setIn(["functionConfig","dynamicUrlType"],null).setIn(["functionConfig","altTextWithAttachmentName"],null).setIn(["functionConfig","toolTipWithAttachmentName"],null)})},this.handleChooseShape=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","imageParam","cropParam"],e)})},this.handleImageFillModeChange=e=>{let t=this.props.config.setIn(["functionConfig","imageFillMode"],e);t.functionConfig.imageParam&&t.functionConfig.imageParam.originalUrl&&(t=t.setIn(["functionConfig","imageParam","url"],t.functionConfig.imageParam.originalUrl)),t.functionConfig.imageParam&&t.functionConfig.imageParam.cropParam&&(t=t.setIn(["functionConfig","imageParam","cropParam"],{svgViewBox:t.functionConfig.imageParam.cropParam.svgViewBox,svgPath:t.functionConfig.imageParam.cropParam.svgPath,cropShape:t.functionConfig.imageParam.cropParam.cropShape})),this.props.onSettingChange({id:this.props.id,config:t})},this.getIsDataSourceUsed=()=>this.props.useDataSourcesEnabled,this.handleSymbolScaleChange=e=>{const t=parseFloat(e);t!==this.props.config.functionConfig.symbolScale&&(clearTimeout(this.onSymbolScaleChanged),this.onSymbolScaleChanged=setTimeout((()=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","symbolScale"],t)})}),500))},this.onToolTipTextInputChange=e=>{this.setState({currentTipInput:e})},this.onAltTextTextInputChange=e=>{this.setState({currentAltTextInput:e})},this.onToolTipWithSomeKeyChange=(e,t)=>{const i={id:this.props.id,config:this.props.config.setIn(["functionConfig","toolTip"],null).setIn(["functionConfig","toolTipExpression"],null).setIn(["functionConfig",e],t),useDataSources:this.getUseDataSourcesWithoutFields()};this.props.onSettingChange(i)},this.onAltTextWithSomeKeyChange=(e,t)=>{const i={id:this.props.id,config:this.props.config.setIn(["functionConfig","altText"],null).setIn(["functionConfig","altTextExpression"],null).setIn(["functionConfig",e],t),useDataSources:this.getUseDataSourcesWithoutFields()};this.props.onSettingChange(i)},this.onTabSelect=t=>{"dynamicSource"===t?this.imgSourceTypeChanged(e.ByDynamicUrl):this.imgSourceTypeChanged(e.ByUpload)},this.onSelectedUseDsChangeForSymbol=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","useDataSourceForMainDataAndViewSelector"],e).setIn(["functionConfig","isSelectedFromRepeatedDataSourceContext"],t)})},this.onSelectedUseDsChangeForAttachment=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["functionConfig","useDataSourceForMainDataAndViewSelector"],e).setIn(["functionConfig","isSelectedFromRepeatedDataSourceContext"],t)})},this.getWhetherDsIdInUseDss=e=>{if(!e)return!1;const t=this.props.useDataSources||[];if(e.split("-").reverse()[0]===i.CONSTANTS.SELECTION_DATA_VIEW_ID){const s=i.DataSourceManager.getInstance().getDataSource(e),o=s&&s.getMainDataSource(),n=o&&o.id;return t.some((e=>e.mainDataSourceId===n))}return t.some((t=>t.dataSourceId===e))},this.state={currentTipInput:this.props.config.functionConfig.toolTip,currentAltTextInput:this.props.config.functionConfig.altText,isShowLinkSetting:!1,shadowOpen:!!this.props.config.styleConfig.boxShadow,isSrcPopupOpen:!1,isToolTipPopupOpen:!1,isAltTextPopupOpen:!1}}getStyle(e){return i.css`
      .widget-setting-image {
        font-size: 13px;
        font-weight: lighter;
        overflow-y: auto;

        .setting-function {

          .setting-function-item {
            overflow: hidden;

            .setting-function-item-input {
              width: 200px;
            }
          }
        }

        .widget-image-chooseshape-item {
          border: 2px solid transparent;
        }

        .border-selected {
          border: 2px solid ${e.colors.palette.primary[600]} !important;
        }

        .uploadInput {
          position: absolute;
          opacity: 0;
          left: 0;
          top: 0;
          cursor: pointer;
        }

        .uploadFileName {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          opacity: 0.5;
        }

        .uploadInput-container {
          position: relative;
        }

        .setting-exterior {

          .exterior-shape-item {
            padding-bottom: 100%;
            cursor: pointer;
          }
        }

        .setting-stylepicker-selected {
          border-width: 2px !important;
        }

        .set-link-btn{
          background-color: ${e.colors.palette.light[500]};
        }
        .set-link-btn:hover, .set-link-btn:hover.set-link-btn:active{
          background-color: ${e.colors.palette.light[400]};
        }

        .set-clear-image {
          &:focus {
            outline: none;
            box-shadow: none !important;
            text-decoration: none;
          }
        }
      }
    `}componentDidUpdate(t){var s,o,n,a,p,r,c,l;if(this.props.useDataSourcesEnabled!==t.useDataSourcesEnabled){const t=this.props.useDataSourcesEnabled;let s=(0,i.Immutable)(this.props.config.functionConfig);t?this.props.config.functionConfig.imgSourceType===e.ByStaticUrl&&(s=s.set("imgSourceType",e.ByDynamicUrl)):this.props.config.functionConfig.imgSourceType===e.ByDynamicUrl&&(s=s.set("imgSourceType",e.ByStaticUrl)),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("functionConfig",s)})}this.props.useDataSourcesEnabled||((null===(o=null===(s=this.props.config)||void 0===s?void 0:s.functionConfig)||void 0===o?void 0:o.toolTip)!==(null===(a=null===(n=t.config)||void 0===n?void 0:n.functionConfig)||void 0===a?void 0:a.toolTip)&&this.setState({currentTipInput:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.toolTip||""}),(null===(r=null===(p=this.props.config)||void 0===p?void 0:p.functionConfig)||void 0===r?void 0:r.altText)!==(null===(l=null===(c=t.config)||void 0===c?void 0:c.functionConfig)||void 0===l?void 0:l.altText)&&this.setState({currentAltTextInput:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.altText||""}))}render(){var p,r,c;const h=this.props.config.functionConfig.imageParam&&this.props.config.functionConfig.imageParam.originalName;return(0,i.jsx)("div",{css:this.getStyle(this.props.theme),className:"jimu-widget"},(0,i.jsx)("div",{className:"widget-setting-image"},(0,i.jsx)(s.SettingSection,null,(0,i.jsx)(s.SettingRow,null,(0,i.jsx)("div",{className:"choose-ds w-100"},(0,i.jsx)(a.DataSourceSelector,{types:this.supportedTypes,useDataSourcesEnabled:this.props.useDataSourcesEnabled,useDataSources:this.props.useDataSources,onToggleUseDataEnabled:this.onToggleUseDataEnabled,onChange:this.onDataSourceChange,widgetId:this.props.id}))),(0,i.jsx)(s.SettingRow,{label:this.props.intl.formatMessage({id:"imageSource",defaultMessage:l.imageSource})}),!this.props.useDataSourcesEnabled&&(0,i.jsx)(s.SettingRow,null,(0,i.jsx)("div",{className:"w-100 d-flex align-items-center"},(0,i.jsx)("div",{style:{minWidth:"60px"}},(0,i.jsx)(n.ImageSelector,{buttonClassName:"text-dark d-flex justify-content-center btn-browse",widgetId:this.props.id,buttonLabel:this.props.intl.formatMessage({id:"imageSet",defaultMessage:l.imageSet}),buttonSize:"sm",onChange:this.onResourceChange,imageParam:this.props.config.functionConfig.imageParam})),(0,i.jsx)("div",{style:{width:"70px"},className:"uploadFileName ml-2",title:h||this.props.intl.formatMessage({id:"imageNoneSource",defaultMessage:l.imageNoneSource})},h||this.props.intl.formatMessage({id:"imageNoneSource",defaultMessage:l.imageNoneSource})))),this.props.useDataSourcesEnabled&&(0,i.jsx)("div",{className:"mt-3"},(0,i.jsx)(o.Tabs,{fill:!0,type:"pills",onChange:this.onTabSelect,value:this.props.config.functionConfig.imgSourceType===e.ByDynamicUrl?"dynamicSource":"staticSource"},(0,i.jsx)(o.Tab,{id:"staticSource",title:this.props.intl.formatMessage({id:"staticSource",defaultMessage:l.staticSource})},(0,i.jsx)("div",{className:"mt-3"},(!this.props.config.functionConfig.imgSourceType||this.props.config.functionConfig.imgSourceType===e.ByUpload)&&(0,i.jsx)(s.SettingRow,null,(0,i.jsx)("div",{className:"w-100 d-flex align-items-center"},(0,i.jsx)("div",{style:{minWidth:"60px"}},(0,i.jsx)(n.ImageSelector,{buttonClassName:"text-dark d-flex justify-content-center btn-browse",widgetId:this.props.id,buttonLabel:this.props.intl.formatMessage({id:"imageSet",defaultMessage:l.imageSet}),buttonSize:"sm",disabled:this.props.config.functionConfig.imgSourceType===e.ByStaticUrl||this.props.config.functionConfig.imgSourceType===e.ByDynamicUrl,onChange:this.onResourceChange,imageParam:this.props.config.functionConfig.imageParam})),(0,i.jsx)("div",{style:{width:"70px"},className:"uploadFileName ml-2",title:h||this.props.intl.formatMessage({id:"imageNoneSource",defaultMessage:l.imageNoneSource})},h||this.props.intl.formatMessage({id:"imageNoneSource",defaultMessage:l.imageNoneSource})))))),(0,i.jsx)(o.Tab,{id:"dynamicSource",title:this.props.intl.formatMessage({id:"dynamicSource",defaultMessage:l.dynamicSource})},(0,i.jsx)("div",{className:"mt-3"},this.props.config.functionConfig.imgSourceType===e.ByDynamicUrl&&(0,i.jsx)(f,{dynamicUrlType:this.props.config.functionConfig.dynamicUrlType,srcExpression:this.getSrcExpression(),useDataSources:this.props.useDataSources,isSrcPopupOpen:this.state.isSrcPopupOpen,onDynamicUrlTypeChanged:this.dynamicUrlTypeChanged,onSrcExpChange:this.onSrcExpChange,openSrcPopup:this.openSrcPopup,closeSrcPopup:this.closeSrcPopup,widgetId:this.props.id,intl:this.props.intl,isSelectedFromRepeatedDataSourceContext:this.props.config.functionConfig.isSelectedFromRepeatedDataSourceContext,useDataSourceForMainDataAndViewSelector:this.getWhetherDsIdInUseDss(null===(r=null===(p=this.props.config.functionConfig)||void 0===p?void 0:p.useDataSourceForMainDataAndViewSelector)||void 0===r?void 0:r.dataSourceId)?this.props.config.functionConfig.useDataSourceForMainDataAndViewSelector:null,onSelectedUseDsChangeForSymbol:this.onSelectedUseDsChangeForSymbol,onSelectedUseDsChangeForAttachment:this.onSelectedUseDsChangeForAttachment,onTypeNoSupportChange:this.onTypeNoSupportChange})))))),(0,i.jsx)(s.SettingSection,null,(0,i.jsx)(s.SettingRow,null,(0,i.jsx)(o.Button,{className:"w-100",type:"primary",onClick:()=>{this.setState({isShowLinkSetting:!this.state.isShowLinkSetting})},ref:this.linkSettingTrigger},(0,i.jsx)(T,{className:"mr-3"}),this.props.intl.formatMessage({id:"setLinkForImage",defaultMessage:l.setLinkForImage}))),(0,i.jsx)(m,{imgSourceType:this.props.config.functionConfig.imgSourceType,dynamicUrlType:this.props.config.functionConfig.dynamicUrlType,intl:this.props.intl,useDataSourcesEnabled:this.props.useDataSourcesEnabled,useDataSources:this.props.useDataSources,openToolTipPopup:this.openToolTipPopup,closeToolTipPopup:this.closeToolTipPopup,toolTipExpression:this.getToolTipExpression(),onToolTipExpChange:this.onToolTipExpChange,isToolTipPopupOpen:this.state.isToolTipPopupOpen,toolTipConfigChange:this.toolTipConfigChange,onToolTipTextInputChange:this.onToolTipTextInputChange,toolTipText:this.state.currentTipInput,widgetId:this.props.id,toolTipWithAttachmentName:this.props.config.functionConfig.toolTipWithAttachmentName,onToolTipWithAttachmentNameChange:e=>{this.onToolTipWithSomeKeyChange("toolTipWithAttachmentName",e)}}),(0,i.jsx)(S,{imgSourceType:this.props.config.functionConfig.imgSourceType,dynamicUrlType:this.props.config.functionConfig.dynamicUrlType,intl:this.props.intl,useDataSourcesEnabled:this.props.useDataSourcesEnabled,useDataSources:this.props.useDataSources,openAltTextPopup:this.openAltTextPopup,closeAltTextPopup:this.closeAltTextPopup,altTextExpression:this.getAltTextExpression(),onAltTextExpChange:this.onAltTextExpChange,isAltTextPopupOpen:this.state.isAltTextPopupOpen,altTextConfigChange:this.altTextConfigChange,onAltTextTextInputChange:this.onAltTextTextInputChange,altTextText:this.state.currentAltTextInput,widgetId:this.props.id,altTextWithAttachmentName:this.props.config.functionConfig.altTextWithAttachmentName,onAltTextWithAttachmentNameChange:e=>{this.onAltTextWithSomeKeyChange("altTextWithAttachmentName",e)}})),(0,i.jsx)(s.SettingSection,null,this.props.config.functionConfig.dynamicUrlType!==t.Symbol&&(0,i.jsx)(s.SettingRow,{label:this.props.intl.formatMessage({id:"imagePosition",defaultMessage:l.imagePosition})},(0,i.jsx)("div",{style:{width:"50%"}},(0,i.jsx)(o.Select,{size:"sm",value:this.props.config.functionConfig.imageFillMode?this.props.config.functionConfig.imageFillMode:o.ImageFillMode.Fill,onChange:e=>this.handleImageFillModeChange(e.target.value)},(0,i.jsx)("option",{key:0,value:o.ImageFillMode.Fill},this.props.intl.formatMessage({id:"imageFill",defaultMessage:l.imageFill})),(0,i.jsx)("option",{key:1,value:o.ImageFillMode.Fit},this.props.intl.formatMessage({id:"imageFit",defaultMessage:l.imageFit}))))),this.props.config.functionConfig.dynamicUrlType===t.Symbol&&(0,i.jsx)(s.SettingRow,{flow:"wrap",label:this.props.intl.formatMessage({id:"imageSymbolScale",defaultMessage:l.imageSymbolScale})},(0,i.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,i.jsx)(o.Slider,{style:{width:"60%"},"data-field":"space",onChange:e=>{this.handleSymbolScaleChange(e.currentTarget.value)},value:this.props.config.functionConfig.symbolScale?this.props.config.functionConfig.symbolScale:1,title:"0.5-5",size:"sm",min:this.minSymbolScale,max:this.maxSymbolScale,step:this.SymbolScaleStep}),(0,i.jsx)(o.NumericInput,{style:{width:"35%"},showHandlers:!1,min:this.minSymbolScale,max:this.maxSymbolScale,value:this.props.config.functionConfig.symbolScale?this.props.config.functionConfig.symbolScale:1,onBlur:e=>{this.handleSymbolScaleChange(e.currentTarget.value)},title:"0.5-5"}))),this.props.config.functionConfig.dynamicUrlType!==t.Symbol&&(0,i.jsx)(s.SettingRow,{flow:"wrap",label:this.props.intl.formatMessage({id:"imageShape",defaultMessage:l.imageShape})},(0,i.jsx)(g,{theme:this.props.theme,cropParam:this.props.config.functionConfig.imageParam&&this.props.config.functionConfig.imageParam.cropParam,onShapeChoosed:e=>{this.handleChooseShape(e)},intl:this.props.intl}))),this.state.isShowLinkSetting&&!i.urlUtils.getAppIdPageIdFromUrl().pageId&&(0,i.jsx)(s.LinkSettingPopup,{showDialog:this.state.isShowLinkSetting,onSettingCancel:()=>{this.setState({isShowLinkSetting:!1})},onSettingConfirm:this.settingLinkConfirm,linkParam:this.props.config.functionConfig.linkParam,useDataSources:this.getIsDataSourceUsed()&&this.props.useDataSources,widgetId:this.props.id,trigger:null===(c=this.linkSettingTrigger)||void 0===c?void 0:c.current})))}}y.mapExtraStateProps=e=>({preDefinedConfigs:p})})(),c})())}}}));