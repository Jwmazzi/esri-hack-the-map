System.register(["jimu-core","jimu-ui","esri/Map","esri/views/MapView","esri/layers/FeatureLayer","esri/widgets/Locate","esri/rest/route","esri/Graphic","esri/rest/support/FeatureSet","esri/rest/support/RouteParameters","esri/widgets/Home","esri/config","esri/rest/support/Query","esri/rest/networkService"],(function(e,t){var s={},i={},o={},r={},a={},n={},l={},d={},u={},p={},c={},h={},f={},x={};return{setters:[function(e){s.React=e.React,s.jsx=e.jsx},function(e){i.Button=e.Button,i.Checkbox=e.Checkbox,i.Col=e.Col,i.Collapse=e.Collapse,i.Container=e.Container,i.Form=e.Form,i.FormGroup=e.FormGroup,i.Input=e.Input,i.Label=e.Label,i.Modal=e.Modal,i.ModalBody=e.ModalBody,i.ModalFooter=e.ModalFooter,i.ModalHeader=e.ModalHeader,i.Nav=e.Nav,i.NavItem=e.NavItem,i.NavLink=e.NavLink,i.Select=e.Select,i.TextInput=e.TextInput,i.Toast=e.Toast,i.ToastType=e.ToastType},function(e){o.default=e.default},function(e){r.default=e.default},function(e){a.default=e.default},function(e){n.default=e.default},function(e){l.default=e.default},function(e){d.default=e.default},function(e){u.default=e.default},function(e){p.default=e.default},function(e){c.default=e.default},function(e){h.default=e.default},function(e){f.default=e.default},function(e){x.default=e.default}],execute:function(){e((()=>{var e={136:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var i=s(645),o=s.n(i)()((function(e){return e[1]}));o.push([e.id,".hack-toast-message>div.jimu-toast-info{font-weight:400;background-color:white;box-shadow:0px 4px 4px rgba(0,0,0,0.25)}\n",""]);const r=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=e(t);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(o[a]=!0)}for(var n=0;n<e.length;n++){var l=[].concat(e[n]);i&&o[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),t.push(l))}},t}},379:(e,t,s)=>{"use strict";var i,o=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),r=[];function a(e){for(var t=-1,s=0;s<r.length;s++)if(r[s].identifier===e){t=s;break}return t}function n(e,t){for(var s={},i=[],o=0;o<e.length;o++){var n=e[o],l=t.base?n[0]+t.base:n[0],d=s[l]||0,u="".concat(l," ").concat(d);s[l]=d+1;var p=a(u),c={css:n[1],media:n[2],sourceMap:n[3]};-1!==p?(r[p].references++,r[p].updater(c)):r.push({identifier:u,updater:x(c,t),references:1}),i.push(u)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var r=s.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function p(e,t,s,i){var o=s?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function c(e,t,s){var i=s.css,o=s.media,r=s.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var h=null,f=0;function x(e,t){var s,i,o;if(t.singleton){var r=f++;s=h||(h=l(t)),i=p.bind(null,s,r,!1),o=p.bind(null,s,r,!0)}else s=l(t),i=c.bind(null,s,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var s=n(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<s.length;i++){var o=a(s[i]);r[o].references--}for(var l=n(e,t),d=0;d<s.length;d++){var u=a(s[d]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}s=l}}}},282:e=>{"use strict";e.exports=d},254:e=>{"use strict";e.exports=o},678:e=>{"use strict";e.exports=h},37:e=>{"use strict";e.exports=a},465:e=>{"use strict";e.exports=x},820:e=>{"use strict";e.exports=l},903:e=>{"use strict";e.exports=u},871:e=>{"use strict";e.exports=f},440:e=>{"use strict";e.exports=p},591:e=>{"use strict";e.exports=r},956:e=>{"use strict";e.exports=c},380:e=>{"use strict";e.exports=n},810:e=>{"use strict";e.exports=s},835:e=>{"use strict";e.exports=i}},t={};function g(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={id:s,exports:{}};return e[s](o,o.exports,g),o.exports}g.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return g.d(t,{a:t}),t},g.d=(e,t)=>{for(var s in t)g.o(t,s)&&!g.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),g.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.p="";var m={};return g.p=window.jimuConfig.baseUrl,(()=>{"use strict";g.r(m),g.d(m,{default:()=>I});var e=g(810),t=g(835),s=g(254),i=g(591),o=g(37),r=g(380),a=g(820),n=g(282),l=g(903),d=g(440);const u=({longitude:e,latitude:t},s="#f00")=>{const i={type:"point",x:e,y:t,spatialReference:{wkid:4326}};return new n.default({geometry:i,symbol:p(s)})},p=e=>({type:"simple-marker",style:"square",size:"25px",outline:{color:"#fff",width:"3px"},color:e}),c=e=>`data:image/svg+xml;base64,${btoa(e)}`,h=(e,t=64)=>({type:"picture-marker",url:c(`<svg width="${t}" height="32" viewBox="0 0 ${t} 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <style>\n    text { text-anchor: middle; }\n    tspan { font: 12px Avenir Next; fill: #fff; }\n  </style>\n  <rect width="100%" height="100%" rx="8" fill="#0066FF"/>\n  <text x="50%" y="50%" transform="translate(0,4)"><tspan>${e}</tspan></text>\n</svg>`),width:`${t}px`,height:"32px"});class f extends e.React.PureComponent{constructor(s){super(s),this.renderRouteOptionsCollapse=()=>{const s={fontSize:"16px",lineHeight:"20px",color:"#151515"},i=(0,e.jsx)("div",{style:{display:"grid",gap:"20px"}},(0,e.jsx)("div",null,(0,e.jsx)("span",{style:s},"Transport method"),(0,e.jsx)(t.Select,{"a11y-description":"Please pick a transport method",hasContent:!0,onChange:this.handleChangeForTransportMethod,value:this.state.transportMethod},(0,e.jsx)(Option,{value:"driving"},"Driving"),(0,e.jsx)(Option,{value:"walking"},"Walking"))),(0,e.jsx)("div",null,(0,e.jsx)("span",{style:s},"Max time"),(0,e.jsx)(t.Select,{"a11y-description":"Please pick a max time for travel",hasContent:!0,onChange:this.handleChangeForMaxTime,value:this.state.maxTime},Array(11).fill(0).map(((e,t)=>5*(t+1))).map((t=>(0,e.jsx)(Option,{key:t,value:t},`${t} min`))))));return(0,e.jsx)("div",{style:{marginTop:"24px"}},(0,e.jsx)(t.Button,{type:"tertiary",size:"lg",onClick:this.handleCollapseToggle,style:{width:"100%",paddingLeft:0,paddingRight:0,textAlign:"start"}},(0,e.jsx)("span",{className:"esri-icon "+(this.state.showRouteOptions?"esri-icon-down":"esri-icon-right"),style:{fontSize:"10px",marginRight:"8px"}}),"Route options"),(0,e.jsx)(t.Collapse,{style:{marginTop:"12px"},isOpen:this.state.showRouteOptions},i))},this.handleChangeForTestingKits=(e,t)=>{this.setState({isCheckedForTestingKits:t})},this.handleChangeForInPerson=(e,t)=>{this.setState({isCheckedForInPerson:t})},this.handleChangeForTransportMethod=e=>{this.setState({transportMethod:e.target.value})},this.handleChangeForMaxTime=e=>{this.setState({maxTime:e.target.value})},this.handleCollapseToggle=()=>{this.setState((({showRouteOptions:e})=>({showRouteOptions:!e})))},this.handleSubmitSmartRoute=()=>{this.props.onSubmit({searchFor:[...this.state.isCheckedForTestingKits?["testingKits"]:[],...this.state.isCheckedForInPerson?["inPersonTest"]:[]],transportMethod:this.state.transportMethod,maxTime:this.state.maxTime}),this.props.toggle()},this.state={isCheckedForTestingKits:!0,isCheckedForInPerson:!0,transportMethod:"driving",maxTime:20,showRouteOptions:!1}}render(){const s={fontSize:"14px",lineHeight:"16px",color:"#151515",margin:"0px 8px"};return(0,e.jsx)(t.Modal,{toggle:this.props.toggle,isOpen:this.props.isOpen,centered:!0},(0,e.jsx)(t.ModalHeader,{style:{padding:"32px 32px 24px",border:0},toggle:this.props.toggle},(0,e.jsx)("span",{style:{fontWeight:"600",fontSize:"26px",lineHeight:"32px",color:"#35AC46"}},"SmartRoute")),(0,e.jsx)(t.ModalBody,{style:{padding:"0 32px"}},(0,e.jsx)("div",{style:{fontSize:"16px",lineHeight:"20px",fontWeight:"600",color:"#000000"}},"I'm searching for"),(0,e.jsx)("ul",{style:{listStyle:"none",padding:0,display:"grid",gap:"16px",margin:"16px 0"}},(0,e.jsx)("li",null,(0,e.jsx)(t.Label,{centric:!0,check:!0},(0,e.jsx)(t.Checkbox,{checked:this.state.isCheckedForTestingKits,onChange:this.handleChangeForTestingKits}),(0,e.jsx)("span",{style:s},"Testing Kits"))),(0,e.jsx)("li",null,(0,e.jsx)(t.Label,{centric:!0,check:!0},(0,e.jsx)(t.Checkbox,{checked:this.state.isCheckedForInPerson,onChange:this.handleChangeForInPerson}),(0,e.jsx)("span",{style:s}," In-Person Test (Walk in)")))),this.renderRouteOptionsCollapse()),(0,e.jsx)(t.ModalFooter,{style:{padding:"32px"}},(0,e.jsx)(t.Button,{size:"lg",block:!0,type:"primary",onClick:this.handleSubmitSmartRoute},"Create route")))}}class x extends e.React.PureComponent{constructor(e){super(e),this.submitResponse=e=>{e.preventDefault();var t=Array.from(document.querySelectorAll("[data-tk]")).filter((e=>e.checked));t=t.length>0?t[0].defaultValue:"N/A";var s=Array.from(document.querySelectorAll("[data-wk]")).filter((e=>e.checked));s=s.length>0?s[0].defaultValue:"N/A";const i=new n.default({attributes:{SiteID:this.props.siteFeature.attributes.SiteID,TK_Answer:t,WK_Answer:s,Comments:document.getElementById("userComment").value}});this.feedbackFL.applyEdits({addFeatures:[i]}),this.props.toggle()},this.handleSubmitSmartRoute=()=>{this.props.onSubmit({searchFor:["testingKits","inPersonTest"],transportMethod:"driving",maxTime:60}),this.props.toggle()},this.feedbackFL=new o.default({url:this.props.config.feedbackURL}),this.state={checked:!1}}render(){return(0,e.jsx)(t.Modal,{toggle:this.props.toggle,isOpen:this.props.isOpen,centered:!0},(0,e.jsx)(t.ModalHeader,{toggle:this.props.toggle},"Comment on Current Facility Status"),(0,e.jsx)(t.ModalBody,null,(0,e.jsx)(t.Form,null,(0,e.jsx)(t.FormGroup,{tag:"fieldset"},(0,e.jsx)("legend",null,"Test Kit Availability"),(0,e.jsx)(t.FormGroup,{check:!0},(0,e.jsx)(t.Input,{"data-tk":!0,value:"yes",name:"radio1",type:"radio"})," ",(0,e.jsx)(t.Label,{check:!0},"There are many tests available.")),(0,e.jsx)(t.FormGroup,{check:!0},(0,e.jsx)(t.Input,{"data-tk":!0,value:"no",name:"radio1",type:"radio"})," ",(0,e.jsx)(t.Label,{check:!0},"There are few tests available."))),(0,e.jsx)(t.FormGroup,{tag:"fieldset"},(0,e.jsx)("legend",null,"Walk-in Availability"),(0,e.jsx)(t.FormGroup,{check:!0},(0,e.jsx)(t.Input,{"data-wk":!0,value:"yes",name:"radio2",type:"radio"})," ",(0,e.jsx)(t.Label,{check:!0},"Wait times are short at this location.")),(0,e.jsx)(t.FormGroup,{check:!0},(0,e.jsx)(t.Input,{"data-wk":!0,value:"no",name:"radio2",type:"radio"})," ",(0,e.jsx)(t.Label,{check:!0},"Wait times are long at this location."))),(0,e.jsx)(t.FormGroup,null,(0,e.jsx)(t.Label,{for:"userComment"},"Comments"),(0,e.jsx)(t.TextInput,{id:"userComment",name:"userComment",placeholder:"General observations . . ."})),(0,e.jsx)(t.Button,{size:"lg",block:!0,type:"primary",onClick:this.submitResponse},"Submit Response"))))}}var v=g(956),C=g(678),y=g(871);const w=()=>(0,e.jsx)("svg",{width:"48",height:"49",viewBox:"0 0 48 49",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.jsx)("path",{fill:"#E5E5E5",d:"M0 0h48v49H0z"}),(0,e.jsx)("g",{filter:"url(#a)"},(0,e.jsx)("g",{"clip-path":"url(#b)"},(0,e.jsx)("rect",{x:"-16",y:"-4",width:"1440",height:"1024",rx:"16",fill:"#fff"}),(0,e.jsx)("g",{filter:"url(#c)"},(0,e.jsx)("path",{fill:"#fff",d:"M-16-4h1440v57H-16z"}),(0,e.jsx)("rect",{x:"3.8",y:"4.8",width:"41.2",height:"41.2",rx:"8",fill:"#004874",stroke:"#fff"}),(0,e.jsx)("rect",{x:"7.3",y:"14.8",width:"16.9",height:"33.8",rx:"3.8",transform:"rotate(-27.1 7.3 14.8)",fill:"#fff"}),(0,e.jsx)("rect",{x:"16.8",y:"18.3",width:"3.1",height:"7.5",rx:"1.6",transform:"rotate(-27.1 16.8 18.3)",fill:"#004874"}),(0,e.jsx)("rect",{x:"19.1",y:"28.4",width:"8.1",height:"11.9",rx:"1.9",transform:"rotate(-27.1 19.1 28.4)",stroke:"#004874","stroke-width":"1.3"}),(0,e.jsx)("mask",{id:"d",maskUnits:"userSpaceOnUse",x:"15.1",y:"1.5",width:"16.4",height:"20.3",fill:"#000"},(0,e.jsx)("path",{fill:"#fff",d:"M15.1 1.5h16.4v20.3H15.1z"}),(0,e.jsx)("path",{d:"M23.2 20a6 6 0 0 0 4.3-1.6c1.2-1 1.9-2.6 1.9-4.1.1-5.8-5.2-10.3-5.5-10.5a.7.7 0 0 0-.8 0c-.2.1-5.8 4.4-5.9 10.2 0 1.6.6 3.1 1.7 4.2a6.2 6.2 0 0 0 4.3 1.9Zm.6-4.6.7-.7c.2-.3.3-.7.3-1 0-.3.2-.5.3-.7a1 1 0 0 1 1.5 0c.2.2.3.5.3.7 0 .7-.3 1.4-.6 2a4 4 0 0 1-1.6 1.4 1 1 0 0 1-.7.1 1 1 0 0 1-.6-.5 1 1 0 0 1-.1-.7c0-.3.2-.5.5-.6Z"})),(0,e.jsx)("path",{d:"M23.2 20a6 6 0 0 0 4.3-1.6c1.2-1 1.9-2.6 1.9-4.1.1-5.8-5.2-10.3-5.5-10.5a.7.7 0 0 0-.8 0c-.2.1-5.8 4.4-5.9 10.2 0 1.6.6 3.1 1.7 4.2a6.2 6.2 0 0 0 4.3 1.9Zm.6-4.6.7-.7c.2-.3.3-.7.3-1 0-.3.2-.5.3-.7a1 1 0 0 1 1.5 0c.2.2.3.5.3.7 0 .7-.3 1.4-.6 2a4 4 0 0 1-1.6 1.4 1 1 0 0 1-.7.1 1 1 0 0 1-.6-.5 1 1 0 0 1-.1-.7c0-.3.2-.5.5-.6Z",fill:"#009AF2"}),(0,e.jsx)("path",{d:"M23.2 20a6 6 0 0 0 4.3-1.6c1.2-1 1.9-2.6 1.9-4.1.1-5.8-5.2-10.3-5.5-10.5a.7.7 0 0 0-.8 0c-.2.1-5.8 4.4-5.9 10.2 0 1.6.6 3.1 1.7 4.2a6.2 6.2 0 0 0 4.3 1.9Zm.6-4.6.7-.7c.2-.3.3-.7.3-1 0-.3.2-.5.3-.7a1 1 0 0 1 1.5 0c.2.2.3.5.3.7 0 .7-.3 1.4-.6 2a4 4 0 0 1-1.6 1.4 1 1 0 0 1-.7.1 1 1 0 0 1-.6-.5 1 1 0 0 1-.1-.7c0-.3.2-.5.5-.6Z",stroke:"#fff","stroke-width":"2.5",mask:"url(#d)"})))),(0,e.jsx)("defs",null,(0,e.jsx)("filter",{id:"a",x:"-32",y:"-14",width:"1472",height:"1056",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},(0,e.jsx)("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),(0,e.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,e.jsx)("feMorphology",{radius:"2",in:"SourceAlpha",result:"effect1_dropShadow_0_1"}),(0,e.jsx)("feOffset",{dy:"4"}),(0,e.jsx)("feGaussianBlur",{stdDeviation:"6"}),(0,e.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),(0,e.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_0_1"}),(0,e.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,e.jsx)("feMorphology",{radius:"4",in:"SourceAlpha",result:"effect2_dropShadow_0_1"}),(0,e.jsx)("feOffset",{dy:"6"}),(0,e.jsx)("feGaussianBlur",{stdDeviation:"10"}),(0,e.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,e.jsx)("feBlend",{in2:"effect1_dropShadow_0_1",result:"effect2_dropShadow_0_1"}),(0,e.jsx)("feBlend",{in:"SourceGraphic",in2:"effect2_dropShadow_0_1",result:"shape"})),(0,e.jsx)("filter",{id:"c",x:"-16",y:"-4",width:"1440",height:"57",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"},(0,e.jsx)("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),(0,e.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,e.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,e.jsx)("feOffset",{dy:"-1"}),(0,e.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,e.jsx)("feColorMatrix",{values:"0 0 0 0 0.792157 0 0 0 0 0.792157 0 0 0 0 0.792157 0 0 0 1 0"}),(0,e.jsx)("feBlend",{in2:"shape",result:"effect1_innerShadow_0_1"})),(0,e.jsx)("clipPath",{id:"b"},(0,e.jsx)("rect",{x:"-16",y:"-4",width:"1440",height:"1024",rx:"16",fill:"#fff"}))));class j extends e.React.PureComponent{constructor(e){super(e),this.state={}}render(){return(0,e.jsx)(t.Modal,{toggle:this.props.toggle,isOpen:this.props.isOpen,centered:!0},(0,e.jsx)(t.ModalBody,null,(0,e.jsx)("div",{style:{textAlign:"center"}},(0,e.jsx)("p",null,"Coming Soon"),(0,e.jsx)("legend",null,"Find an appointment"),(0,e.jsx)("p",null,"Avoid bouncing between websites with unclear availability and travel times")),(0,e.jsx)(t.Button,{size:"lg",block:!0,type:"primary",onClick:this.props.toggle},"Get notified"),(0,e.jsx)("br",null),(0,e.jsx)(t.Button,{size:"lg",block:!0,type:"secondary",onClick:this.props.toggle},"Not right now")))}}class S extends e.React.Component{render(){return e.React.createElement(t.Nav,{className:"me-auto",navbar:!0},this.props.allTypes.map((s=>{const i=s===this.props.currentType;return e.React.createElement(t.Col,null,e.React.createElement(t.NavItem,{active:i,style:{boxShadow:i?"inset 0 -3px 0px 0px #076fe5":void 0,opacity:i?"initial":.7,display:"inline-block",height:"100%",lineHeight:"56px"}},e.React.createElement(t.NavLink,{onClick:()=>{this.props.onClick(s)},style:{padding:0,color:"#151515",fontSize:"16px"}},s)))})))}}const b=["Test Now","Test Later"];class k extends e.React.PureComponent{constructor(e){super(e),this.handleChangeType=e=>{this.setState({activeType:e}),"Test Later"==e&&this.setState({showModal:!0})},this.closeModal=()=>{this.setState({showModal:!1,activeType:b[0]})},this.state={activeType:b[0],showModal:!1}}render(){return(0,e.jsx)("div",{style:{position:"absolute",background:"#fff",top:0,width:"100%",height:this.props.height,boxShadow:"inset 0 -1px 0 0 #cacaca",display:"grid",gridTemplateColumns:`${this.props.height}px auto ${this.props.height}px`}},(0,e.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},(0,e.jsx)(w,null)),(0,e.jsx)("div",null,(0,e.jsx)(t.Container,null,(0,e.jsx)(S,{onClick:this.handleChangeType,currentType:this.state.activeType,allTypes:b})),(0,e.jsx)(j,{toggle:this.closeModal,isOpen:this.state.showModal})),(0,e.jsx)("div",null))}}var T=g(379),M=g.n(T),R=g(136);M()(R.Z,{insert:"head",singleton:!1}),R.Z.locals;const F=({toastText:s})=>e.React.createElement(t.Toast,{type:t.ToastType.Info,open:!!s,text:s,className:"hack-toast-message"});var L=g(465),A=function(e,t,s,i){return new(s||(s=Promise))((function(o,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function n(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,n)}l((i=i.apply(e,t||[])).next())}))};class I extends e.React.PureComponent{constructor(e){super(e),this.setToast=(e,t)=>{this.setState({toastText:e}),setTimeout((()=>{this.setState({toastText:""})}),1e3*t)},this.openSmartRouteModal=()=>{this.setState({showRouteModal:!0})},this.closeSmartRouteModal=()=>{this.setState({showRouteModal:!1})},this.openRespondModal=()=>{this.setState({showResponseModal:!0})},this.closeRespondModal=()=>{this.setState({showResponseModal:!1})},this.handleSubmitSmartRoute=e=>A(this,void 0,void 0,(function*(){this.view.graphics.removeAll();const t="driving"===e.transportMethod?"Driving Time":"Walking Time";console.log({info:e});const s=this.USE_MOCKED_USER_LOCATION?{coords:{longitude:-117.182541,latitude:34.055569}}:yield this.locator.locate(),i=u(s.coords,"#62C1FB"),o=new y.default({geometry:i.geometry,returnGeometry:!0,outFields:["*"],orderByFields:["ToBreak"],where:`ToBreak <= ${e.maxTime}`}),r="Driving Time"===t?this.driveServiceAreaFL:this.walkServiceAreaFL,p=yield r.queryExtent(o);if(console.log("SA",p),!p.extent)return void this.setToast("SmartRoute Not Ready for Your Area!",3);const c=new y.default({geometry:p.extent,returnGeometry:!0,outFields:["*"]});e.searchFor.includes("testingKits")&&(c.orderByFields=["TestsInStockPCR DESC","TestsInStockRapid DESC"]),e.searchFor.includes("inPersonTest")?c.where="WalkInsAccepted = 'Yes'":c.where="1=1",console.log(c);const f=yield this.providerFL.queryFeatures(c);this.setToast("Address Copied to Clipboard",3),navigator.clipboard.writeText(f.features[0].attributes.SiteAddress);const x=u(f.features[0].geometry,"#35AC46");console.log(f);const g=new l.default({features:[i,f.features[0]]}),m=yield L.default.fetchServiceDescription(this.props.config.routingURL,this.props.config.apiKey),{supportedTravelModes:v}=m,C=v.find((e=>e.name===t)),w=new d.default({travelMode:C,apiKey:this.props.config.apiKey,stops:g,outSpatialReference:{wkid:3857},directionsOutputType:"standard",returnDirections:!0});try{const e=(yield a.default.solve("https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",w)).routeResults[0].route;e.symbol={type:"simple-line",width:"7px",color:"#0066FF"};const s=e.geometry,o="Driving Time"===t?e.attributes.Total_TravelTime:e.attributes.Total_WalkTime,r=Math.floor(s.paths[0].length/2),l=s.paths[0][r],d=new n.default({attributes:{route:0},geometry:{type:"point",x:l[0],y:l[1],spatialReference:{wkid:3857}},symbol:h(`${Math.ceil(o)} min`)});this.view.graphics.addMany([e,i,x,d]),this.view.popup.close(),this.view.goTo(s.extent.expand(1.25)),this.routingTargetFL.applyEdits({addFeatures:[new n.default({attributes:{SiteID:f.features[0].attributes.SiteID}})]}),this.setState({routeCalculation:"complete"})}catch(e){console.error(e),this.setState({routeCalculation:"failed"})}this.closeSmartRouteModal()})),C.default.apiKey=this.props.config.apiKey,this.USE_MOCKED_USER_LOCATION=this.checkURLParameter(),this.state={routeCalculation:"idle",isViewReady:!1,showRouteModal:!1,showResponseModal:!1,toastText:""};const t={title:"Directions",id:"routeIt",type:"button",image:c('<svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M19 22.003L18.497 22C11.59 21.958 -4.66213e-05 21.514 -4.66213e-05 19C-4.66213e-05 17.91 1.75595 17.584 4.18695 17.134C5.37995 16.914 7.86395 16.452 8.00095 15.996C7.88495 15.628 5.88395 15.107 3.47795 14.999L2.99995 14.979V14L3.99995 14.026C6.05995 14.154 8.99995 14.586 8.99995 16C8.99995 17.259 6.85395 17.656 4.36795 18.117C3.18795 18.336 1.21495 18.701 0.985953 19.057C1.29495 20.027 9.30995 20.944 18.501 21H19V22.003ZM7.99995 4.133C7.99995 6.412 5.81395 9.5 3.99995 13C2.18595 9.5 -4.66213e-05 6.413 -4.66213e-05 4.132C-0.0122551 3.59712 0.0819001 3.06514 0.276954 2.56694C0.472008 2.06874 0.764075 1.61425 1.1362 1.22984C1.50833 0.845434 1.9531 0.53877 2.44471 0.32765C2.93631 0.116529 3.46496 0.00515793 3.99995 0C4.53495 0.00515793 5.06359 0.116529 5.5552 0.32765C6.0468 0.53877 6.49158 0.845434 6.8637 1.22984C7.23583 1.61425 7.5279 2.06874 7.72295 2.56694C7.91801 3.06514 8.01216 3.59712 7.99995 4.132V4.133ZM4.56495 9.885C5.81695 7.66 6.99995 5.562 6.99995 4.132C7.01289 3.72828 6.9451 3.32604 6.80057 2.94885C6.65604 2.57167 6.43767 2.22713 6.15827 1.93543C5.87886 1.64373 5.54404 1.41074 5.17342 1.25011C4.80281 1.08948 4.40386 1.00445 3.99995 1C3.59605 1.00445 3.1971 1.08948 2.82648 1.25011C2.45587 1.41074 2.12105 1.64373 1.84164 1.93543C1.56223 2.22713 1.34386 2.57167 1.19933 2.94885C1.0548 3.32604 0.987019 3.72828 0.999953 4.132C0.999953 5.562 2.18295 7.662 3.43495 9.885C3.62095 10.217 3.81095 10.553 3.99995 10.895C4.18995 10.553 4.37895 10.217 4.56495 9.885ZM5.99995 4C5.99995 4.39556 5.88266 4.78224 5.66289 5.11114C5.44313 5.44004 5.13077 5.69638 4.76532 5.84776C4.39987 5.99913 3.99773 6.03874 3.60977 5.96157C3.22181 5.8844 2.86544 5.69392 2.58574 5.41421C2.30603 5.13451 2.11555 4.77814 2.03838 4.39018C1.96121 4.00222 2.00082 3.60009 2.15219 3.23463C2.30357 2.86918 2.55991 2.55682 2.88881 2.33706C3.21771 2.1173 3.60439 2 3.99995 2C4.53039 2 5.03909 2.21071 5.41417 2.58579C5.78924 2.96086 5.99995 3.46957 5.99995 4ZM4.99995 4C4.99995 3.80222 4.9413 3.60888 4.83142 3.44443C4.72154 3.27998 4.56536 3.15181 4.38264 3.07612C4.19991 3.00043 3.99884 2.98063 3.80486 3.01921C3.61088 3.0578 3.4327 3.15304 3.29285 3.29289C3.15299 3.43275 3.05775 3.61093 3.01917 3.80491C2.98058 3.99889 3.00039 4.19996 3.07607 4.38268C3.15176 4.56541 3.27993 4.72159 3.44438 4.83147C3.60883 4.94135 3.80217 5 3.99995 5C4.26517 5 4.51952 4.89464 4.70706 4.70711C4.8946 4.51957 4.99995 4.26522 4.99995 4ZM22 11.132C22 13.413 19.814 16.5 18 20C16.186 16.5 14 13.413 14 11.132C13.983 10.5961 14.0739 10.0622 14.2673 9.56209C14.4607 9.06198 14.7526 8.60583 15.1257 8.22074C15.4988 7.83564 15.9455 7.52945 16.4393 7.32035C16.933 7.11124 17.4638 7.00349 18 7.00349C18.5362 7.00349 19.0669 7.11124 19.5606 7.32035C20.0544 7.52945 20.5011 7.83564 20.8742 8.22074C21.2473 8.60583 21.5392 9.06198 21.7326 9.56209C21.926 10.0622 22.0169 10.5961 22 11.132ZM18.565 16.885C19.817 14.66 21 12.562 21 11.132C21.0181 10.7267 20.9539 10.322 20.8113 9.94225C20.6687 9.56248 20.4507 9.21553 20.1703 8.92235C19.89 8.62917 19.5531 8.39583 19.1801 8.23641C18.8071 8.07699 18.4056 7.9948 18 7.9948C17.5943 7.9948 17.1928 8.07699 16.8198 8.23641C16.4468 8.39583 16.1099 8.62917 15.8296 8.92235C15.5492 9.21553 15.3312 9.56248 15.1886 9.94225C15.046 10.322 14.9818 10.7267 15 11.132C15 12.562 16.183 14.662 17.435 16.885C17.621 17.217 17.811 17.553 18 17.895C18.19 17.553 18.379 17.217 18.565 16.885ZM20 11C20 11.3956 19.8827 11.7822 19.6629 12.1111C19.4431 12.44 19.1308 12.6964 18.7653 12.8478C18.3999 12.9991 17.9977 13.0387 17.6098 12.9616C17.2218 12.8844 16.8654 12.6939 16.5857 12.4142C16.306 12.1345 16.1156 11.7781 16.0384 11.3902C15.9612 11.0022 16.0008 10.6001 16.1522 10.2346C16.3036 9.86918 16.5599 9.55682 16.8888 9.33706C17.2177 9.1173 17.6044 9 18 9C18.5304 9 19.0391 9.21071 19.4142 9.58579C19.7892 9.96086 20 10.4696 20 11ZM19 11C19 10.8022 18.9413 10.6089 18.8314 10.4444C18.7215 10.28 18.5654 10.1518 18.3826 10.0761C18.1999 10.0004 17.9988 9.98063 17.8049 10.0192C17.6109 10.0578 17.4327 10.153 17.2928 10.2929C17.153 10.4327 17.0578 10.6109 17.0192 10.8049C16.9806 10.9989 17.0004 11.2 17.0761 11.3827C17.1518 11.5654 17.2799 11.7216 17.4444 11.8315C17.6088 11.9414 17.8022 12 18 12C18.2652 12 18.5195 11.8946 18.7071 11.7071C18.8946 11.5196 19 11.2652 19 11Z" fill="#363636"/>\n                        </svg>\n                        ')},i={title:"Respond",id:"respondIt",type:"button",image:c('<svg width="22" height="19" viewBox="0 0 22 19" fill="none" xmlns="http://www.w3.org/2000/svg">\n                          <path fill-rule="evenodd" clip-rule="evenodd" d="M16.52 0L15.52 1H0V0H16.52ZM0 4V5H11.52L12.52 4H0ZM4.52 12H0V13H3.655C3.72445 12.8459 3.81983 12.7048 3.937 12.583L4.52 12ZM0 8V9H7.52L8.52 8H0ZM20.95 1.934C21.1413 2.11164 21.2524 2.35919 21.258 2.62015C21.2637 2.88112 21.1634 3.13324 20.98 3.319L7.825 16.471L3.73 18.227C3.59051 18.2873 3.42837 18.2564 3.32082 18.149C3.21326 18.0417 3.18203 17.8796 3.242 17.74L4.998 13.643L18.15 0.491C18.3358 0.307619 18.5879 0.207312 18.8488 0.212964C19.1098 0.218617 19.3574 0.329747 19.535 0.521L20.95 1.934ZM7.02 15.728L5.74 14.448L4.78 16.688L7.02 15.728ZM18.093 4.79L16.68 3.376L6.382 13.674L7.795 15.088L18.093 4.79ZM19.958 2.345L19.154 1.507C19.0759 1.42544 18.9683 1.37874 18.8555 1.37743C18.7426 1.37611 18.6339 1.42029 18.554 1.5L17.387 2.67L18.8 4.083L19.952 2.932C20.1131 2.77044 20.1158 2.50982 19.958 2.345Z" fill="#363636"/>\n                          </svg>\n                          ')};this.walkServiceAreaFL=new o.default({title:"Provider Service Areas",url:this.props.config.walkSAURL,visible:!1}),this.driveServiceAreaFL=new o.default({title:"Provider Service Areas",url:this.props.config.driveSAURL,visible:!1}),this.providerFL=new o.default({title:"SB County Providers",url:this.props.config.providerURL,outFields:["*"],popupTemplate:{title:"{SiteName}",lastEditInfoEnabled:!1,actions:[t,i],expressionInfos:[{name:"testingKits",expression:'var sum = $feature.TestsInStockPCR + $feature.TestsInStockRapid;\n                         if (sum <= 50) {\n                           return "#0FBA4E"\n                         } \n                         return "#0FBA4E"\n                        '},{name:"walkingIn",expression:'if ($feature.WalkInsAccepted == "Yes") {\n                           return "Walk-ins Accepted"\n                         } \n                         return "";\n                        '},{name:"editElapse",expression:'return Round(DateDiff(Now(), Date($feature.LastUpdateDate), "hours"));'}],content:'\n                <p style="margin: auto">{SiteAddress}</p>\n                <p>Last Updated {expression/editElapse} Hours Ago</p>\n                <p style="color: green">{expression/walkingIn}</p>\n                 '}}),this.routingTargetFL=new o.default({url:this.props.config.routingTargetsURL}),this.map=new s.default({basemap:"arcgis-community",layers:[this.providerFL]})}checkURLParameter(){const e=window.location.search;return"true"===new URLSearchParams(e).get("demo")}componentDidMount(){return A(this,void 0,void 0,(function*(){this.view=new i.default({container:"edit-map",map:this.map,zoom:10,center:[-117.182541,34.055569],padding:{top:56},popup:{dockEnabled:!1,collapseEnabled:!1,dockOptions:{buttonEnabled:!1,position:"bottom-right",breakpoint:!1}}}),yield this.view.when(),this.setState({isViewReady:!0}),this.view.popup.on("trigger-action",(e=>{"routeIt"===e.action.id&&this.handleRouting(),"respondIt"===e.action.id&&(this.openRespondModal(),this.view.popup.close(),this.view.graphics.removeAll())})),this.locator=new r.default({view:this.view}),this.view.ui.add(this.locator,"top-left");const e=new v.default({view:this.view});this.view.ui.add(e,"top-left")}))}handleRouting(){return A(this,void 0,void 0,(function*(){this.setState({routeCalculation:"calculating"}),this.view.graphics.removeAll();const e=this.view.popup.selectedFeature;this.setToast("Address Copied to Clipboard",2),navigator.clipboard.writeText(e.attributes.SiteAddress);const t=this.USE_MOCKED_USER_LOCATION?{coords:{longitude:-117.182541,latitude:34.055569}}:yield this.locator.locate();if(!t||!e)return void this.setState({routeCalculation:"failed"});const s=e.geometry,i=u(t.coords,"#62C1FB"),o=u(s,"#35AC46"),r=new l.default({features:[i,o]}),p=new d.default({apiKey:this.props.config.apiKey,stops:r,outSpatialReference:{wkid:3857},directionsOutputType:"standard",returnDirections:!0});try{const t=(yield a.default.solve("https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",p)).routeResults[0].route;t.symbol={type:"simple-line",width:"7px",color:"#0066FF"};const s=t.geometry,r=Math.floor(s.paths[0].length/2),l=s.paths[0][r],d=new n.default({attributes:{route:0},geometry:{type:"point",x:l[0],y:l[1],spatialReference:{wkid:3857}},symbol:h(`${Math.ceil(t.attributes.Total_TravelTime)} min`)});this.view.graphics.addMany([t,i,o,d]),this.view.popup.close(),this.view.goTo(s.extent.expand(1.25)),this.routingTargetFL.applyEdits({addFeatures:[new n.default({attributes:{SiteID:e.attributes.SiteID}})]}),this.setState({routeCalculation:"complete"})}catch(e){console.error(e),this.setState({routeCalculation:"failed"})}}))}render(){return(0,e.jsx)("div",{style:{height:"100%"}},(0,e.jsx)("div",{className:"widget-hack-map",id:"edit-map",style:{height:"100%"}}),(0,e.jsx)(k,{height:56}),(0,e.jsx)("div",{className:"button-container",style:{position:"absolute",bottom:0,width:"100%",textAlign:"center",padding:"0 32px 24px"}},(0,e.jsx)(t.Button,{size:"lg",type:"primary",style:{width:"100%",maxWidth:"360px"},onClick:this.openSmartRouteModal},"SmartRoute")),(0,e.jsx)(f,{toggle:this.closeSmartRouteModal,isOpen:this.state.showRouteModal,onSubmit:this.handleSubmitSmartRoute}),(0,e.jsx)(x,{toggle:this.closeRespondModal,isOpen:this.state.showResponseModal,onSubmit:this.handleSubmitSmartRoute,config:this.props.config,siteFeature:null!=this.view?this.view.popup.selectedFeature:-1}),(0,e.jsx)(F,{toastText:this.state.toastText}))}}})(),m})())}}}));